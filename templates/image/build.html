{@extend name="base" /@}
{@block name="css"@}
<link rel="stylesheet" href="__JS__/code/lib/codemirror.css">
<link rel="stylesheet" href="__JS__/code/theme/solarized.css">
<style>
.panel-heading .nav > li > a{
	color: #667fa0!important;
}
.widuu_tab > li.active > a, .widuu_tab > li > a:hover{
	color: #47596f;
    background: #fff;
    border: 1px solid #eee!important;
    border-bottom: none!important;
    border-top: 1px solid #ff5c5c!important;
}
.m-bot15{
	margin-top:15px;
}
label{ line-height: 43px; }
</style>
{@/block@}
{@block name="content"@}
<div class="pageheader">
  <h2><i class="fa fa-server"></i> 构建镜像 <span>可使用git、私有镜像地址、上传压缩包、编写Dockerfile</span></h2>
  <div class="breadcrumb-wrapper">
    <span class="label"></span>
    <ol class="breadcrumb">
      <!-- <li><a href="index.html">Bracket</a></li>
      <li class="active">Tables</li> -->
    </ol>
  </div>
</div>
<section class="wrapper wrapper-padding-th">
<div class="row">
	<div class="col-lg-12">
	  	<section class="panel widget-shadow">
	      	<div class="wrapper wrapper-mp20">
				<section class="panel"  style="padding-top:40px;">
                    <header class="panel-heading">
                      	<ul class="nav nav-tabs widuu_tab">
                          	<li class="active">
                              	<a data-toggle="tab" href="#git">Git方式</a>
                          	</li>
                          	<li class="">
                            	<a data-toggle="tab" href="#dockerfile">Dockerfile</a>
                          	</li>
                          	<li class="">
                              	<a data-toggle="tab" href="#tar">压缩包</a>
                          	</li>
                          	<li class="">
                              	<a data-toggle="tab" href="#pull">PULL镜像</a>
                          	</li>
                      	</ul>
                    </header>
                  <div class="panel-body">
                      <div class="tab-content">
                          <div id="git" class="tab-pane active">
					          	<form class="form-horizontal tasi-form" action="{@:url('build',['method'=>'git'])@}" method="POST">
						          	<div class="form-group m-bot15">
						              	<label class="col-sm-2 control-label">镜像名称</label>
						                <div class="col-sm-4">
						                	<input type="text" name="image" class="form-control m-bot15" placeholder="镜像名称" value="">
						              	</div>
						            </div>
						            <div class="form-group">
						              	<label class="col-sm-2 control-label">镜像Tag</label>
						                <div class="col-sm-4">
						                	<input type="text" name="tag" class="form-control m-bot15" placeholder="镜像tag" value="latest">
						              	</div>
						            </div>
						            <div class="form-group">
						              	<label class="col-sm-2 control-label text-right">仓库地址</label>
						              	<div class="col-sm-4">
						                	<input type="text" name="git_remote" class="form-control m-bot15" placeholder="git response address" value="">
						              	</div>
						            </div>
						            <div class="form-group">
						              	<label class="col-sm-2 control-label">Docker Registry</label>
						                <div class="col-sm-4">
						                	<input type="text" name="registry" class="form-control m-bot15" placeholder="Docker Registry Address" value="">
						              	</div>
						            </div>
						            <div class="form-group">
						              	<label class="col-sm-2 control-label">Registry 账号</label>
						                <div class="col-sm-4">
						                	<input type="text" name="registry_username" class="form-control m-bot15" placeholder="Docker Registry 账号" value="">
						              	</div>
						            </div>
						            <div class="form-group">
						              	<label class="col-sm-2 control-label">Registry 密码</label>
						                <div class="col-sm-4">
						                	<input type="text" name="registry_password" class="form-control m-bot15" placeholder="Docker Registry 密码" value="">
						              	</div>
						            </div>
						            <div class="form-group">
						            <button type="submit" class="btn btn-info   m-bot15">构建镜像</button>
						            </div>
					        	</form>
                          </div>
                          <div id="dockerfile" class="tab-pane">
							<form class="form-horizontal tasi-form" action="{@:url('build',['method'=>'dockerfile'])@}" method="POST">
						          	<div class="form-group m-bot15">
						              	<label class="col-sm-2 control-label">镜像名称</label>
						                <div class="col-sm-4">
						                	<input type="text" name="image" class="form-control m-bot15" placeholder="镜像名称" value="">
						              	</div>
						            </div>
						            <div class="form-group">
						              	<label class="col-sm-2 control-label">镜像Tag</label>
						                <div class="col-sm-4">
						                	<input type="text" name="tag" class="form-control m-bot15" placeholder="镜像tag" value="latest">
						              	</div>
						            </div>
						            <div class="form-group">
						              	<label class="col-sm-2 control-label">Docker Registry</label>
						                <div class="col-sm-4">
						                	<input type="text" name="registry" class="form-control m-bot15" placeholder="Docker Registry Address" value="">
						              	</div>
						            </div>
						            <div class="form-group">
						              	<label class="col-sm-2 control-label">Registry 账号</label>
						                <div class="col-sm-4">
						                	<input type="text" name="registry_username" class="form-control m-bot15" placeholder="Docker Registry 账号" value="">
						              	</div>
						            </div>
						            <div class="form-group">
						              	<label class="col-sm-2 control-label">Registry 密码</label>
						                <div class="col-sm-4">
						                	<input type="text" name="registry_password" class="form-control m-bot15" placeholder="Docker Registry 密码" value="">
						              	</div>
						            </div>
						           <div class="form-group">
						              	<label class="col-sm-2 control-label text-right">Dockerfile</label>
						              	<div class="col-sm-6">
						                	<textarea class="form-control" cols="60" rows="12" id="dockerfile_edit" name="dockerfile">    </textarea>
						              	</div>
						            </div>
						            <div class="form-group">
						            <button type="submit" class="btn btn-info   m-bot15">构建镜像</button>
						            </div>
					        	</form>
                          </div>
                          <div id="tar" class="tab-pane">Tar</div>
                          <div id="pull" class="tab-pane">Pull</div>
                      </div>
                  </div>
                </section>
	        </div>
	  </section>
	</div>
</div>
</section>
{@/block@}
{@block name="script"@}
<script src="__JS__build.js"></script>
<script src="__JS__/code/lib/codemirror.js"></script>
<script src="__JS__/code/addon/mode/simple.js"></script>
<script src="__JS__/code/mode/dockerfile/dockerfile.js"></script>
<script type="text/javascript">
var CodeMirrorEditor = CodeMirror.fromTextArea(document.getElementById('dockerfile_edit'),{
    value: "function myScript(){return 100;}\n",
    cursorBlinkRate:500,
    mode: "text/x-dockerfile",
	lineNumbers: true,
	indentUnit: 4,
	theme:"solarized dark",
	cursorHeight:0.85
});
</script>
{@/block@}